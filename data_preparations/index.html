
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../data_guide/">
      
      
        <link rel="next" href="../soil_moisture_predictions/">
      
      
      <link rel="icon" href="../assets/logo_white.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Data Preparation and Preprocessing - SOMOSPIE Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M1%207.775V2.75C1%201.784%201.784%201%202.75%201h5.025c.464%200%20.91.184%201.238.513l6.25%206.25a1.75%201.75%200%200%201%200%202.474l-5.026%205.026a1.75%201.75%200%200%201-2.474%200l-6.25-6.25A1.75%201.75%200%200%201%201%207.775m1.5%200c0%20.066.026.13.073.177l6.25%206.25a.25.25%200%200%200%20.354%200l5.025-5.025a.25.25%200%200%200%200-.354l-6.25-6.25a.25.25%200%200%200-.177-.073H2.75a.25.25%200%200%200-.25.25ZM6%205a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2.5%201.75v11.5c0%20.138.112.25.25.25h3.17a.75.75%200%200%201%200%201.5H2.75A1.75%201.75%200%200%201%201%2013.25V1.75C1%20.784%201.784%200%202.75%200h8.5C12.216%200%2013%20.784%2013%201.75v7.736a.75.75%200%200%201-1.5%200V1.75a.25.25%200%200%200-.25-.25h-8.5a.25.25%200%200%200-.25.25m13.274%209.537zl-4.557%204.45a.75.75%200%200%201-1.055-.008l-1.943-1.95a.75.75%200%200%201%201.062-1.058l1.419%201.425%204.026-3.932a.75.75%200%201%201%201.048%201.074M4.75%204h4.5a.75.75%200%200%201%200%201.5h-4.5a.75.75%200%200%201%200-1.5M4%207.75A.75.75%200%200%201%204.75%207h2a.75.75%200%200%201%200%201.5h-2A.75.75%200%200%201%204%207.75%22/%3E%3C/svg%3E');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M0%208a8%208%200%201%201%2016%200A8%208%200%200%201%200%208m8-6.5a6.5%206.5%200%201%200%200%2013%206.5%206.5%200%200%200%200-13M6.5%207.75A.75.75%200%200%201%207.25%207h1a.75.75%200%200%201%20.75.75v2.75h.25a.75.75%200%200%201%200%201.5h-2a.75.75%200%200%201%200-1.5h.25v-2h-.25a.75.75%200%200%201-.75-.75M8%206a1%201%200%201%201%200-2%201%201%200%200%201%200%202%22/%3E%3C/svg%3E');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M3.499.75a.75.75%200%200%201%201.5%200v.996C5.9%202.903%206.793%203.65%207.662%204.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873%2010.794-.045%2012.622.26%2014.408.558%2016%201.94%2016%204.25c0%201.278-.954%202.575-2.44%202.734l.146.508.065.22c.203.701.412%201.455.476%202.226.142%201.707-.4%203.03-1.487%203.898C11.714%2014.671%2010.27%2015%208.75%2015h-6a.75.75%200%200%201%200-1.5h1.376a4.5%204.5%200%200%201-.563-1.191%203.84%203.84%200%200%201-.05-2.063%204.65%204.65%200%200%201-2.025-.293.75.75%200%200%201%20.525-1.406c1.357.507%202.376-.006%202.698-.318l.009-.01a.747.747%200%200%201%201.06%200%20.75.75%200%200%201-.012%201.074c-.912.92-.992%201.835-.768%202.586.221.74.745%201.337%201.196%201.621H8.75c1.343%200%202.398-.296%203.074-.836.635-.507%201.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.4%202.4%200%200%201-.507-.441%203.1%203.1%200%200%201-.633-1.248.75.75%200%200%201%201.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738%200%201.25-.615%201.25-1.25%200-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706%201.345-.46.92-.27%201.774.019%203.062l.042.19.01.05c.348.443.666.949.94%201.553a.75.75%200%201%201-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7%205.527c-.814-.68-1.75-1.462-2.692-2.619a3.7%203.7%200%200%200-1.023.88c-.406.495-.663%201.036-.722%201.508.116.122.306.21.591.239.388.038.797-.06%201.032-.19a.75.75%200%200%201%20.728%201.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75%205.677V5.5c0-.984.48-1.94%201.077-2.664.46-.559%201.05-1.055%201.673-1.353z%22/%3E%3C/svg%3E');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M13.78%204.22a.75.75%200%200%201%200%201.06l-7.25%207.25a.75.75%200%200%201-1.06%200L2.22%209.28a.75.75%200%200%201%20.018-1.042.75.75%200%200%201%201.042-.018L6%2010.94l6.72-6.72a.75.75%200%200%201%201.06%200%22/%3E%3C/svg%3E');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M0%208a8%208%200%201%201%2016%200A8%208%200%200%201%200%208m8-6.5a6.5%206.5%200%201%200%200%2013%206.5%206.5%200%200%200%200-13M6.92%206.085h.001a.749.749%200%201%201-1.342-.67c.169-.339.436-.701.849-.977C6.845%204.16%207.369%204%208%204a2.76%202.76%200%200%201%201.637.525c.503.377.863.965.863%201.725%200%20.448-.115.83-.329%201.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6%206%200%200%200-.26.16%201%201%200%200%200-.276.245.75.75%200%200%201-1.248-.832c.184-.264.42-.489.692-.661q.154-.1.313-.195l.007-.004c.1-.061.182-.11.258-.161a1%201%200%200%200%20.277-.245C8.96%206.514%209%206.427%209%206.25a.61.61%200%200%200-.262-.525A1.27%201.27%200%200%200%208%205.5c-.369%200-.595.09-.74.187a1%201%200%200%200-.34.398M9%2011a1%201%200%201%201-2%200%201%201%200%200%201%202%200%22/%3E%3C/svg%3E');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M6.457%201.047c.659-1.234%202.427-1.234%203.086%200l6.082%2011.378A1.75%201.75%200%200%201%2014.082%2015H1.918a1.75%201.75%200%200%201-1.543-2.575Zm1.763.707a.25.25%200%200%200-.44%200L1.698%2013.132a.25.25%200%200%200%20.22.368h12.164a.25.25%200%200%200%20.22-.368Zm.53%203.996v2.5a.75.75%200%200%201-1.5%200v-2.5a.75.75%200%200%201%201.5%200M9%2011a1%201%200%201%201-2%200%201%201%200%200%201%202%200%22/%3E%3C/svg%3E');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2.344%202.343za8%208%200%200%201%2011.314%2011.314A8.002%208.002%200%200%201%20.234%2010.089a8%208%200%200%201%202.11-7.746m1.06%2010.253a6.5%206.5%200%201%200%209.108-9.275%206.5%206.5%200%200%200-9.108%209.275M6.03%204.97%208%206.94l1.97-1.97a.749.749%200%200%201%201.275.326.75.75%200%200%201-.215.734L9.06%208l1.97%201.97a.749.749%200%200%201-.326%201.275.75.75%200%200%201-.734-.215L8%209.06l-1.97%201.97a.749.749%200%200%201-1.275-.326.75.75%200%200%201%20.215-.734L6.94%208%204.97%206.03a.75.75%200%200%201%20.018-1.042.75.75%200%200%201%201.042-.018%22/%3E%3C/svg%3E');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M9.504.43a1.516%201.516%200%200%201%202.437%201.713L10.415%205.5h2.123c1.57%200%202.346%201.909%201.22%203.004l-7.34%207.142a1.25%201.25%200%200%201-.871.354h-.302a1.25%201.25%200%200%201-1.157-1.723L5.633%2010.5H3.462c-1.57%200-2.346-1.909-1.22-3.004zm1.047%201.074L3.286%208.571A.25.25%200%200%200%203.462%209H6.75a.75.75%200%200%201%20.694%201.034l-1.713%204.188%206.982-6.793A.25.25%200%200%200%2012.538%207H9.25a.75.75%200%200%201-.683-1.06l2.008-4.418.003-.006-.004-.009-.006-.006-.008-.001q-.005%200-.009.004%22/%3E%3C/svg%3E');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M4.72.22a.75.75%200%200%201%201.06%200l1%20.999a3.5%203.5%200%200%201%202.441%200l.999-1a.748.748%200%200%201%201.265.332.75.75%200%200%201-.205.729l-.775.776c.616.63.995%201.493.995%202.444v.327q0%20.15-.025.292c.408.14.764.392%201.029.722l1.968-.787a.75.75%200%200%201%20.556%201.392L13%207.258V9h2.25a.75.75%200%200%201%200%201.5H13v.5q-.002.615-.141%201.186l2.17.868a.75.75%200%200%201-.557%201.392l-2.184-.873A5%205%200%200%201%208%2016a5%205%200%200%201-4.288-2.427l-2.183.873a.75.75%200%200%201-.558-1.392l2.17-.868A5%205%200%200%201%203%2011v-.5H.75a.75.75%200%200%201%200-1.5H3V7.258L.971%206.446a.75.75%200%200%201%20.558-1.392l1.967.787c.265-.33.62-.583%201.03-.722a1.7%201.7%200%200%201-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72%201.28a.75.75%200%200%201%200-1.06m.53%206.28a.75.75%200%200%200-.75.75V11a3.5%203.5%200%201%200%207%200V7.25a.75.75%200%200%200-.75-.75ZM6.173%205h3.654A.17.17%200%200%200%2010%204.827V4.5a2%202%200%201%200-4%200v.327c0%20.096.077.173.173.173%22/%3E%3C/svg%3E');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5%205.782V2.5h-.25a.75.75%200%200%201%200-1.5h6.5a.75.75%200%200%201%200%201.5H11v3.282l3.666%205.76C15.619%2013.04%2014.543%2015%2012.767%2015H3.233c-1.776%200-2.852-1.96-1.899-3.458Zm-2.4%206.565a.75.75%200%200%200%20.633%201.153h9.534a.75.75%200%200%200%20.633-1.153L12.225%2010.5h-8.45ZM9.5%202.5h-3V6c0%20.143-.04.283-.117.403L4.73%209h6.54L9.617%206.403A.75.75%200%200%201%209.5%206Z%22/%3E%3C/svg%3E');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M1.75%202.5h10.5a.75.75%200%200%201%200%201.5H1.75a.75.75%200%200%201%200-1.5m4%205h8.5a.75.75%200%200%201%200%201.5h-8.5a.75.75%200%200%201%200-1.5m0%205h8.5a.75.75%200%200%201%200%201.5h-8.5a.75.75%200%200%201%200-1.5M2.5%207.75v6a.75.75%200%200%201-1.5%200v-6a.75.75%200%200%201%201.5%200%22/%3E%3C/svg%3E');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#data-preparation-and-preprocessing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="SOMOSPIE Documentation" class="md-header__button md-logo" aria-label="SOMOSPIE Documentation" data-md-component="logo">
      
  <img src="../assets/logo_white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SOMOSPIE Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Data Preparation and Preprocessing
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/TauferLab/SOMOSPIE" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="SOMOSPIE Documentation" class="md-nav__button md-logo" aria-label="SOMOSPIE Documentation" data-md-component="logo">
      
  <img src="../assets/logo_white.png" alt="logo">

    </a>
    SOMOSPIE Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/TauferLab/SOMOSPIE" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../data_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Data Preparation and Preprocessing
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Data Preparation and Preprocessing
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preparing-soil-moisture-data" class="md-nav__link">
    <span class="md-ellipsis">
      Preparing Soil Moisture Data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-terrain-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Preparing Terrain Parameters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Preparing Terrain Parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accessing-terrain-parameters-data" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing Terrain Parameters Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coarsifying-terrain-parameters-optional" class="md-nav__link">
    <span class="md-ellipsis">
      Coarsifying Terrain Parameters [Optional]
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Coarsifying Terrain Parameters [Optional]">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reprojecting-the-raster-data" class="md-nav__link">
    <span class="md-ellipsis">
      Reprojecting the Raster Data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stacking-the-raster-data" class="md-nav__link">
    <span class="md-ellipsis">
      Stacking the Raster Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-ecoregions" class="md-nav__link">
    <span class="md-ellipsis">
      Preparing Ecoregions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Preparing Ecoregions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-ecoregion-shape" class="md-nav__link">
    <span class="md-ellipsis">
      Creating Ecoregion Shape
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-final-dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the Final Dataset
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating the Final Dataset">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#merging-soil-moisture-and-terrain-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Merging Soil Moisture and Terrain Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cropping-to-ecoregion" class="md-nav__link">
    <span class="md-ellipsis">
      Cropping to Ecoregion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-of-the-final-dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Example of the Final Dataset
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../soil_moisture_predictions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Machine Learning Algorithms
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../additional_features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Additional Features
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Research
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Research
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Research/publications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Publications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Research/acknowledgements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Acknowledgements
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preparing-soil-moisture-data" class="md-nav__link">
    <span class="md-ellipsis">
      Preparing Soil Moisture Data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-terrain-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Preparing Terrain Parameters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Preparing Terrain Parameters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accessing-terrain-parameters-data" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing Terrain Parameters Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coarsifying-terrain-parameters-optional" class="md-nav__link">
    <span class="md-ellipsis">
      Coarsifying Terrain Parameters [Optional]
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Coarsifying Terrain Parameters [Optional]">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reprojecting-the-raster-data" class="md-nav__link">
    <span class="md-ellipsis">
      Reprojecting the Raster Data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stacking-the-raster-data" class="md-nav__link">
    <span class="md-ellipsis">
      Stacking the Raster Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-ecoregions" class="md-nav__link">
    <span class="md-ellipsis">
      Preparing Ecoregions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Preparing Ecoregions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-ecoregion-shape" class="md-nav__link">
    <span class="md-ellipsis">
      Creating Ecoregion Shape
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-final-dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Creating the Final Dataset
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating the Final Dataset">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#merging-soil-moisture-and-terrain-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Merging Soil Moisture and Terrain Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cropping-to-ecoregion" class="md-nav__link">
    <span class="md-ellipsis">
      Cropping to Ecoregion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-of-the-final-dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Example of the Final Dataset
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="data-preparation-and-preprocessing">Data Preparation and Preprocessing</h1>
<p>SOMOSPIE supports a variety of preprocessing functions, which allow users to modify custom data before being used by <a href="../soil_moisture_predictions/">machine learning algorithms</a>. Once the data has been downloaded, it should be preprocessed using the following methods. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>All preprocessing methods are found within the directory <code>SOMOSPIE/code/preprocessing/</code>. </li>
<li>The <a href="../data_guide/">Data Guide</a> elaborates on the data necessary for SOMOSPIE.</li>
<li>The data must be downloaded. This guide assumes data is within a directory located at <code>SOMOSPIE/data</code>.</li>
<li>See the "Data Fetching" section of <a href="../additional_features/">Additional Features</a> for a guide on how to fetch data.</li>
</ul>
</div>
<h2 id="preparing-soil-moisture-data">Preparing Soil Moisture Data</h2>
<p>Soil moisture data should be obtained from the European Space Agency Climate Change Initiative (ESA-CCI) soil moisture dataset. This dataset captures the available soil moisture at a 27km x 27km resolution for the entire world, allowing for accurate reading of the data for a specified year; however, some gaps may appear due to various factors. The data is formatted as a NetCDF (.nc) file for each day for a specified year. </p>
<p>Once downloaded, the data can be preprocessed from daily soil moisture data into monthly soil moisture data within the specified year using <code>extract_SM_monthly.R</code>. This results in a structured dataset similar to the following:</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>x</td>
<td>Longitude location</td>
<td>-101.375</td>
</tr>
<tr>
<td>y</td>
<td>Latitude location</td>
<td>37.125</td>
</tr>
<tr>
<td>X1</td>
<td>Soil moisture average for January</td>
<td>0.112</td>
</tr>
<tr>
<td>X2</td>
<td>Soil moisture average for February</td>
<td>0.160</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>X12</td>
<td>Soil moisture average for December</td>
<td>0.349</td>
</tr>
<tr>
<td><em>Table 1: example results of extract_SM_monthly.R</em></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>The data will be available in an .rds format, which is eventually be converted into a .csv file with added terrain parameters. </p>
<p><strong>Example Command</strong>:
<div class="highlight"><pre><span></span><code>./extract_SM_monthly.R<span class="w"> </span><span class="m">2017</span>
</code></pre></div></p>
<h2 id="preparing-terrain-parameters">Preparing Terrain Parameters</h2>
<h3 id="accessing-terrain-parameters-data">Accessing Terrain Parameters Data</h3>
<p>Terrain parameters can be obtained in two ways: GEOtiled or HydroShare. GEOtiled is an open-source software that efficiently generates terrain parameters from Digital Elevation Models (DEMs). For more information on generating terrain parameters using GEOtiled, please visit <a href="https://globalcomputing.group/GEOtiled/">GEOtiled</a>.</p>
<p>HydroShare contains a dataset "Explanatory Variables and DEMs," whose columns describe the following terrain parameters, all of which can be used within SOMOSPIE.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Units</th>
</tr>
</thead>
<tbody>
<tr>
<td>Terrain Aspect</td>
<td>The orientation of the terrain slope</td>
<td>Radians</td>
</tr>
<tr>
<td>Catchment Area</td>
<td>Specific catchment area, the area from which rainfall flows into a river, lake, or reservoir</td>
<td>Square meters</td>
</tr>
<tr>
<td>Channel Network Base Level</td>
<td>Channel network base level, the distance of each pixel to the highest surrounding elevation</td>
<td>Meters</td>
</tr>
<tr>
<td>Distance to Channel Network</td>
<td>Distance from each pixel to the nearest channel network, stream, or river</td>
<td>Meters</td>
</tr>
<tr>
<td>Convergence Index</td>
<td>Convergence index obtained by averaging the bias of the slope directions of adjacent cells from the central cell, subtracting 90°</td>
<td>-90° to +90°</td>
</tr>
<tr>
<td>Horizontal Curvature</td>
<td>Plan curvature, the curvature of the hillside in a horizontal plane. Indicates concavity or convexity of terrain</td>
<td>Unitless (centered at 0)</td>
</tr>
<tr>
<td>DEM, Elevation</td>
<td>Digital elevation model 1x1km</td>
<td>Meters above sea level</td>
</tr>
<tr>
<td>Length Slope Factor</td>
<td>Length of constant slopes from-to a given point</td>
<td>Meters</td>
</tr>
<tr>
<td>Relative Slope Position</td>
<td>Position of relative height maxima as a function of slope. 0 = valley floor, 100 = ridge top</td>
<td>Continuous (0–100)</td>
</tr>
<tr>
<td>Analytical Hillshading</td>
<td>Representation of topographic relief simulating the effect of natural light on the surface</td>
<td>Adimensional</td>
</tr>
<tr>
<td>Filtered DEM</td>
<td>Elevation data after identifying and filling surface depressions for hydrologic analysis</td>
<td>Meters above sea level</td>
</tr>
<tr>
<td>Terrain Slope</td>
<td>The change of elevation relative to horizontal distance; measure of steepness or inclination</td>
<td>Radians</td>
</tr>
<tr>
<td>Valley Depth Index</td>
<td>Interpolation of channel network base level elevation and subtraction from original elevations</td>
<td>Meters</td>
</tr>
<tr>
<td>Vertical Curvature</td>
<td>Profile curvature intersecting the plane defined by the Z axis and the maximum gradient. Positive = convex, negative = concave</td>
<td>Unitless (centered at 0)</td>
</tr>
<tr>
<td>Topographic Wetness Index</td>
<td>Indicator of likelihood of saturated soil during rain events and sediment/matter accumulation</td>
<td>Adimensional</td>
</tr>
<tr>
<td><em>Table 2: acceptable terrain features accepted from HydroShare</em></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="coarsifying-terrain-parameters-optional">Coarsifying Terrain Parameters [Optional]</h2>
<p>With terrain parameters downloaded, an optional step is to coarsen the parameters, which will ultimately result in quicker soil moisture predictions at the cost of resolution. The resolution can be coarsened by an integer factor greater than 1. This is not a necessary step, as the data can be used at its native resolution. The script <code>coarsify.R</code> coarsens the resolution through the command: <code>./coarsify.R [input_file] [output_file] [aggregation_factor]</code>. </p>
<p><strong>Example Command</strong>:
Scaling the resolution by a factor of 5
<div class="highlight"><pre><span></span><code>./coarsify.R<span class="w"> </span>topo.tif<span class="w"> </span>coarse_topo.tif<span class="w"> </span><span class="m">5</span>
</code></pre></div></p>
<h3 id="reprojecting-the-raster-data">Reprojecting the Raster Data</h3>
<p>The raster file including the terrain parameters should be standardized to the WGS84 format, which uses the geographic coordinate system (longitude/latitude). The file may already be in this format, but for safety, it is recommended to reproject the raster to ensure compatibility. </p>
<p>To reproject the raster, run <code>./reproject_raster.R [Input_files] [Output_files]</code> in the command line.</p>
<p><strong>Example Command</strong>:
<div class="highlight"><pre><span></span><code>./reproject_raster.R<span class="w"> </span>../data/topo_predictors/<span class="si">${</span><span class="nv">topo</span><span class="si">}</span>.tif<span class="w"> </span>../data/topo_predictors/<span class="si">${</span><span class="nv">topo</span><span class="si">}</span>.tif<span class="sb">`</span>.<span class="w"> </span>
</code></pre></div></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code>reproject_raster.R</code> is currently deprecated; the required R library PlotKML is deprecated. </p>
</div>
<h3 id="stacking-the-raster-data">Stacking the Raster Data</h3>
<p>The terrain parameters come as multiple raster files that describe each terrain parameter. These features need to be combined into a single file that encapsulates all features into a raster format. Merging the files into a single file is performed through a raster stack, which stacks the terrain parameters into a single raster. </p>
<p>To make the raster stack, run the command <code>./make_raster_stack.R [output_directory] [input_files]</code>.</p>
<p><strong>Example Command</strong>:
<div class="highlight"><pre><span></span><code>./make_raster_stack.R<span class="w"> </span>./topo_predictors/<span class="w"> </span>./data/topo15_CONUS_1km.tif<span class="w"> </span>Analytical_Hillshading.tif<span class="w"> </span>Aspect.tif<span class="w"> </span>
</code></pre></div></p>
<h2 id="preparing-ecoregions">Preparing Ecoregions</h2>
<h3 id="creating-ecoregion-shape">Creating Ecoregion Shape</h3>
<p>Ecoregions can be obtained from the <a href="https://www.cec.org/north-american-environmental-atlas/terrestrial-ecoregions-level-iii/">Commission for Environmental Cooperation (CEC) website</a>. They should be downloaded as a shapefile. Other options for ecoregion preparation include states and boxes. These ecoregions must be converted to an .rds shape file through <code>create_shape.R</code> before proceeding. To create this .rds file, run:<code>./create_shape.R [region_type] [region] [output_path]</code>.</p>
<p><strong>Example 1</strong>: Using the state of Arizona
<div class="highlight"><pre><span></span><code>./create_shape.R STATE ARIZONA ./data/shapes/Arizona.rds
</code></pre></div>
<strong>Example 2</strong>: Using CEC level III region 10.2.4
<div class="highlight"><pre><span></span><code>./create_shape.R CEC 10.2.4 ./data/shapes/CEC_10_2_4.rds
</code></pre></div>
<strong>Example 3</strong>: Using a box to set an ecoregion
<div class="highlight"><pre><span></span><code>./create_shape.R BOX -120_-110_30_40 ./data/shapes/box.rds
</code></pre></div></p>
<h2 id="creating-the-final-dataset">Creating the Final Dataset</h2>
<h3 id="merging-soil-moisture-and-terrain-parameters">Merging Soil Moisture and Terrain Parameters</h3>
<p>With the prepared soil moisture stack and terrain parameters stack, the two files can be combined into one .csv file for training. Combining the files is done through the R script <code>add_topos.R</code>. The script can be run through the command line using:
<div class="highlight"><pre><span></span><code>./add_topos.R [soil_moisture_file] [covariates_stack_file] [output_file] [terrain_parameters (optional)]
</code></pre></div>
<strong>Example Command</strong>: 
<div class="highlight"><pre><span></span><code>./add_topos.R<span class="w"> </span>soil_moisture.rds<span class="w"> </span>cov.tif<span class="w"> </span>prepared_data.csv<span class="w"> </span>SLOPE<span class="w"> </span>ASPECT<span class="w"> </span>HILLSHADING
</code></pre></div></p>
<h3 id="cropping-to-ecoregion">Cropping to Ecoregion</h3>
<p>It is recommended to crop data to the region of interest defined by the ecoregions. Doing so results in substantial speedups for SOMOSPIE and requires significantly less memory than working on a large, uncropped area. Cropping the prepared data is done through the <code>crop_to_shape.R</code> script, using the previously created shapefile. It accepts the prepared dataset, along with the prepared ecoregion shape as parameters.</p>
<p><strong>Example Command</strong>:
<div class="highlight"><pre><span></span><code>./crop_to_shape.R<span class="w"> </span>prepared_data.csv<span class="w"> </span>./data/shapes/CEC_10_2_4.rds<span class="w"> </span>prepared_data_cropped.csv
</code></pre></div></p>
<h2 id="example-of-the-final-dataset">Example of the Final Dataset</h2>
<p>Below is a generated train.csv file for the state of Oklahoma:</p>
<table>
<thead>
<tr>
<th>Index</th>
<th>Longitude</th>
<th>Latitude</th>
<th>Soil Moisture</th>
<th>Elevation</th>
<th>Aspect</th>
<th>Slope</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>-101.375</td>
<td>37.125</td>
<td>0.112136401</td>
<td>960</td>
<td>1.435353398</td>
<td>0.002797498</td>
</tr>
<tr>
<td>1</td>
<td>-101.125</td>
<td>37.125</td>
<td>0.160304278</td>
<td>911</td>
<td>1.291842222</td>
<td>0.002738319</td>
</tr>
<tr>
<td>2</td>
<td>-100.875</td>
<td>37.125</td>
<td>0.184895456</td>
<td>863</td>
<td>1.106565714</td>
<td>0.004054314</td>
</tr>
<tr>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td>450</td>
<td>-94.125</td>
<td>33.625</td>
<td>0.348578483</td>
<td>91</td>
<td>4.439002514</td>
<td>0.004484821</td>
</tr>
<tr>
<td><em>Table 3: prepared dataset</em></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../data_guide/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Data Guide">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Data Guide
              </div>
            </div>
          </a>
        
        
          
          <a href="../soil_moisture_predictions/" class="md-footer__link md-footer__link--next" aria-label="Next: Machine Learning Algorithms">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Machine Learning Algorithms
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      SENSORY is funded by the National Science Foundation (NSF) under grant numbers #1724843, #1854312, #2103836, #2103845, #2138811, and #2334945. Any opinions, findings, and conclusions, or recommendations expressed in this material are those of the author(s) and do not necessarily reflect the views of the National Science Foundation.

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.code.annotate", "content.tabs.link", "navigation.sections", "navigation.instant", "navigation.instant.progress", "navigation.footer", "navigation.top", "navigation.path", "navigation.expand", "search.suggest"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>